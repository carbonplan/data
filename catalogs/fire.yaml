plugins:
  source:
    - module: intake_xarray

sources:
  raw_mtbs_raster:
    description: The burn severity mosaics consist of thematic raster images of MTBS burn severity classes for all currently completed MTBS fires for the continental United States. Mosaicked burn severity images are compiled annually for the continental United States. Data in this catalog have been converted to cloud optimized geotiff.
    parameters:
      year:
        description: year
        type: int
        default: 1984
      region:
        description: mtbs region
        type: str
        default: conus
        allowed: [conus, ak]
    metadata:
      url: https://www.mtbs.gov/
      tags: [fire, cog]
      ci: xfail  # reason: opendap is flaky
    driver: rasterio
    args:
      urlpath: "https://storage.googleapis.com/carbonplan-data/raw/mtbs/{{ region }}/30m/{{ '%d' % year }}.tif"
      chunks: {'y': 5120, 'x': 5120}

  mtbs_raster:
    description: The burn severity mosaics consist of thematic raster images of MTBS burn severity classes for all currently completed MTBS fires for the continental United States. Mosaicked burn severity images are compiled annually for the continental United States. Data in this catalog have been converted upscaled and converted to Zarr.
    parameters:
      region:
        description: conus or ak
        type: str
        default: conus
        allowed: [conus, ak]
      resolution:
        description: Pixel resolution in meters
        type: str
        default: "4000"
        allowed: ["4000"]
    metadata:
      url: https://www.mtbs.gov/
      tags: [fire, cog]
    driver: zarr
    args:
      urlpath: "gs://carbonplan-data/processed/mtbs/{{ region }}/{{ resolution }}/raster.zarr/"
      storage_options:
        token: 'anon'

  mtbs_fod_shp:
    description: MTBS National - Fire Occurrence Dataset. The fire occurrence location dataset is a vector point ESRI shapefile of the centroids of all currently completed MTBS fires occurring in the continental United States, Alaska, Hawaii and Puerto Rico.
    metadata:
      url: https://www.mtbs.gov/
      tags: [fire, shapefile]
      ci: skip  # reason: fiona is flaky
    driver: shapefile
    args:
      urlpath: "gs://carbonplan-data/raw/MTBS/mtbs_fod_pts_data/mtbs_fod_pts_DD.shp"

  mtbs_perims_shp:
    description: MTBS National - Burned Area Boundaries Dataset. The burned area boundaries dataset is a vector polygon ESRI shapefile of the extent of the burned areas of all currently completed MTBS fires for the continental United States, Alaska, Hawaii and Puerto Rico.
    metadata:
      url: https://www.mtbs.gov/
      tags: [fire, shapefile]
      ci: skip  # reason: fiona is flaky
    driver: shapefile
    args:
      urlpath: "gs://carbonplan-data/raw/MTBS/mtbs_perimeter_data/mtbs_perims_DD.shp"
